const ApiEndpoint="https://www.plo4ox.com/tmp-project/BullieverDiamonMilitia2022/data/getBulliewards.json",isCheckedTag="UNBullieverse_DM_isChecked",Rank={Minuteman:{title:"Minuteman",score:40},Private:{title:"Private",score:100},Corporal:{title:"Corporal",score:300},Sergeant:{title:"Sergeant",score:1e3},Lieutenant:{title:"Lieutenant",score:3e3},Captain:{title:"Captain",score:8e3},Major:{title:"Major",score:15e3},Colonel:{title:"Colonel",score:25e3},Brigadier:{title:"Brigadier",score:4e4},General:{title:"General",score:5e4}};function getRank(e){switch(!0){case e>=Rank.General.score:return Rank.General;case e>=Rank.Brigadier.score:return Rank.Brigadier;case e>=Rank.Colonel.score:return Rank.Colonel;case e>=Rank.Major.score:return Rank.Major;case e>=Rank.Captain.score:return Rank.Captain;case e>=Rank.Lieutenant.score:return Rank.Lieutenant;case e>=Rank.Sergeant.score:return Rank.Sergeant;case e>=Rank.Corporal.score:return Rank.Corporal;case e>=Rank.Private.score:return Rank.Private;case e>=Rank.Minuteman.score:return Rank.Minuteman;default:return}}async function fetchDiamondMilitiaDataAsync(){let e=(await (await fetch("https://www.plo4ox.com/tmp-project/BullieverDiamonMilitia2022/data/getBulliewards.json")).json()).response.data;for(var t=0;t<e.length;t++){let a=e[t];militiaData[a.twitterhandle]=getRank(a.total_score)}return militiaData}function getRankImg(e){return"https://www.plo4ox.com/tmp-project/BullieverDiamonMilitia2022/images/rank/"+e+".png"}function createBadgeElement(e,t){let a=document.createElement("div"),i=document.createElement("img");return i.src=getRankImg(e),a.classList.add("diamondMilitiaBadgeContainer"),t?i.classList.add("diamondMilitiaHeaderPhotoBadge"):i.classList.add("diamondMilitiaPostPhotoBadge"),a.append(i),a}var viewTitle="Unknown";function hasViewTitleChanged(){let e=document.querySelector("title");return void 0!==e&&e.innerHTML!=viewTitle&&(viewTitle=e.innerHTML,!0)}function resetExistingBadges(){let e=document.querySelectorAll("div.diamondMilitiaBadgeContainer");e.forEach(e=>{e.remove()});let t=document.querySelectorAll("a["+isCheckedTag+'=true][role="link"][hasDiamondMilitiaBadge=true]');t.forEach(e=>{e.setAttribute(isCheckedTag,!1)})}function updateViewWithDiamondMilitiaBadge(){let e=document.querySelectorAll("a:not(["+isCheckedTag+'=true])[role="link"]');e.forEach(e=>{if(!0==e.getAttribute(isCheckedTag))return;e.setAttribute(isCheckedTag,!0);let t=e.querySelectorAll("img"),a=t[0];if(void 0==a||t.length>1||!a.src.includes("/profile_images/"))return;let i=new URL(e.href).pathname.split("/"),n=i[1];if(void 0!==militiaData[n]){let r=createBadgeElement(militiaData[n].title,a.src.endsWith("400.jpg"));e.parentElement.insertAdjacentElement("afterend",r),e.setAttribute("hasDiamondMilitiaBadge",!0)}})}var militiaData={};fetchDiamondMilitiaDataAsync();const interval=setInterval(function(){hasViewTitleChanged()&&resetExistingBadges(),updateViewWithDiamondMilitiaBadge()},1e3);
